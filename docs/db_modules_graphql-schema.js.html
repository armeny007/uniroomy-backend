

<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>JSDoc: db/modules/graphql-schema.js</title>

    <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="./build/entry.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link href="https://fonts.googleapis.com/css?family=Muli:100,400,700|Oswald:300|Inconsolata,700" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    <link type="text/css" rel="stylesheet" href="https://jmblog.github.io/color-themes-for-google-code-prettify/themes/tomorrow-night.min.css">
    <link type="text/css" rel="stylesheet" href="styles/app.min.css">
</head>

<body>
    <div id="stickyNavbarOverlay"></div>
    <div class="top-navbar">
        <div class="container">
            <nav class="navbar" role="navigation" aria-label="main navigation">
                <div class="navbar-brand">
                    
                     
                        <h1 class="navbar-item">UniRoomy Backend API Documentation</h1>
                    
                    <a id="hamburger" role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
                        <span aria-hidden="true"></span>
                        <span aria-hidden="true"></span>
                        <span aria-hidden="true"></span>
                    </a>
                </div>
                 
                <div class="navbar-menu">
                    <div class="navbar-end">
                    
                        <div class="navbar-item">
                            <a href="https://github.com/armeny007/uniroomy-backend" target="_blank">GitHub</a>
                        </div>
                    
                        <div class="navbar-item">
                            <a href="https://uniroomy.co.uk:3003/api/graphiql" target="_blank">Live GraphQL demo</a>
                        </div>
                    
                    </div>
                </div>
                
            </nav>
        </div>
    </div>
    <div class="container">
        <div class="columns">
            <div class="column is-3" id="sidebarNav">
                <div class="sidebar">
                    <nav>
                        <h2><a href="index.html">Home</a></h2><div class="category"><h3>Tutorials</h3><ul><li><a href="tutorial-00-usage-examples.html">Usage Examples</a></li><li><a href="tutorial-01-database-schema.html">UniRoomy Database Schema</a></li><li><a href="tutorial-02-graphql-schema.html">UniRoomy GraphQL Schema</a></li><li><a href="tutorial-03-howtorun-instructions.html">How To Run Instructions</a></li><li><a href="tutorial-04-search-houses.html">Search Description</a></li><li><a href="tutorial-05-1-authentication.html">Login and Register</a></li><li><a href="tutorial-05-2-verify-uni-email.html">Verify university email</a></li><li><a href="tutorial-06-file-uploads.html">File Uploads</a></li></ul><h3>Modules</h3><ul><li><a href="module-graphql-schema.html">graphql-schema</a></li><li><a href="module-mongoose-schema.html">mongoose-schema</a></li><li><a href="module-person-auth-init.html">person-auth-init</a></li><li><a href="module-server.html">server</a></li></ul></div>
                    </nav>
                </div>
            </div>
            <div class="column is-9-desktop">
                <div class="content" id="main-content-wrapper">
                    <header class="page-title">
                        <p>Source</p>
                        <h1>db/modules/graphql-schema.js</h1>
                    </header>
                    
                    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/* eslint-disable no-underscore-dangle */
/* eslint-disable no-return-await */
/**
 * @module graphql-schema
 * 
 * @description
 * Schema module describes query types and mutations of UniRoomy backend API
 * 
 */

const fs = require('fs');
const path = require('path');
const uuidv4 = require('uuid/v4');

const {
  GraphQLSchema,
  GraphQLObjectType,
  GraphQLInputObjectType,
  GraphQLString,
  GraphQLInt,
  GraphQLList,
  GraphQLID,
  GraphQLBoolean,
  GraphQLFloat,
  GraphQLNonNull,
  GraphQLScalarType,
} = require('graphql');

const {
  GraphQLDate,
  GraphQLTime,
  GraphQLDateTime
} = require('graphql-iso-date');

const { GraphQLUpload } = require('graphql-upload');

const { prepareQueryFields, prepareMutationFields } = require('./graphql-schema-init');

const ObjectScalarType = new GraphQLScalarType({
  name: 'Object',
  description: 'Arbitrary object',
  parseValue: (value) => {
    return typeof value === 'object' ? value
      : typeof value === 'string' ? JSON.parse(value)
      : null;
  },
  serialize: (value) => {
    return typeof value === 'object' ? value
      : typeof value === 'string' ? JSON.parse(value)
      : null;
  },
  parseLiteral: (ast) => {
    switch (ast.kind) {
      case Kind.STRING: return JSON.parse(ast.value);
      case Kind.OBJECT: throw new Error('Not sure what to do with OBJECT for ObjectScalarType');
      default: return null;
    }
  }
})

const maxReturnedRows = parseInt(process.env.MAX_RETURNED_ROWS, 10) || 50;

function getUrlFileName(url) {
  return url.split('/').pop().split('#')[0].split('?')[0];
}

const {
  University,
  Person,
  Ticket,
  Role,
  Student,
  Status,
  Landlord,
  LandlordKind,
  House,
  HouseKind,
  HousePhoto,
  BedroomPhoto,
  FactGroup,
  HouseFact,
  HouseUniversity,
  Bedroom,
  Category,
  Element,
  ElementKind,
  ElementPreference,
  Achievement,
  StudentAchievement,
  Review,
  ReviewComment,
  ReviewHouseElement,
  HouseElement,
  Notification,
  Bill,
  HouseBill,
  FavoriteHouse,
  PersonIssue
} = require('./mongoose-schema');

const UniversityType = new GraphQLObjectType({
  name: 'University',
  description: 'Represents university.',
  fields: () => ({
    _id: { type: GraphQLInt  },
    name: { type: GraphQLString  },
    city: { type: GraphQLString  },

    houseUniversities: {
      type: new GraphQLList(HouseUniversityType),
      args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        const query = {};
        if (parent.house_university_id_list) {
          query._id =  { $in: parent.house_university_id_list };
        }
        else {
          query.university_id = parent._id;
        }
        return await HouseUniversity.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
      },
    },

    students: {
      type: new GraphQLList(StudentType),
      args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        const query = {};
        if (parent.student_id_list) {
          query._id =  { $in: parent.student_id_list };
        }
        else {
          query.university_id = parent._id;
        }
        return await Student.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
      },
    },


  }),
});

const UniversityCreateInput = new GraphQLInputObjectType({
  name: 'UniversityCreateInput',
  description: 'Input fields for university',
  fields: {
    name: { type: new GraphQLNonNull(GraphQLString)  },
    city: { type: GraphQLString  },
  }
});

const UniversityUpdateInput = new GraphQLInputObjectType({
  name: 'UniversityUpdateInput',
  description: 'Input fields for university',
  fields: {
    name: { type: GraphQLString  },
    city: { type: GraphQLString  },
  }
});

const PersonType = new GraphQLObjectType({
  name: 'Person',
  description: 'Represents person. Contains common fields for different roles (student/landlord).',
  fields: () => ({
    _id: { type: GraphQLInt  },
    first_name: { type: GraphQLString  },
    last_name: { type: GraphQLString  },
    middle_name: { type: GraphQLString  },
    birthday: { type: GraphQLDate  },
    email: { type: GraphQLString  },
    role_id: { type: GraphQLInt  },
    password: { type: GraphQLString  },
    is_admin: { type: GraphQLBoolean  },
    created_at: { type: GraphQLDateTime  },
    updated_at: { type: GraphQLDateTime  },
    profile_photo_url: { type: GraphQLString  },
    full_name: { type: GraphQLString , description: 'Calculated field. Full Name = first_name + middle_name + last_name' },

    role: {
      type: RoleType,
      args: { _id: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        return await Role.findOne({_id: parent.role_id})
      },
    },
    students: {
      type: new GraphQLList(StudentType),
      args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        const query = {};
        if (parent.student_id_list) {
          query._id =  { $in: parent.student_id_list };
        }
        else {
          query._id = parent._id;
        }
        return await Student.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
      },
    },

    landlords: {
      type: new GraphQLList(LandlordType),
      args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        const query = {};
        if (parent.landlord_id_list) {
          query._id =  { $in: parent.landlord_id_list };
        }
        else {
          query._id = parent._id;
        }
        return await Landlord.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
      },
    },

    tickets: {
      type: new GraphQLList(TicketType),
      args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        const query = {};
        if (parent.ticket_id_list) {
          query._id =  { $in: parent.ticket_id_list };
        }
        else {
          query.person_id = parent._id;
        }
        return await Ticket.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
      },
    },

    notifications: {
      type: new GraphQLList(NotificationType),
      args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        const query = {};
        if (parent.notification_id_list) {
          query._id =  { $in: parent.notification_id_list };
        }
        else {
          query.person_id = parent._id;
        }
        return await Notification.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
      },
    },

    personIssues: {
      type: new GraphQLList(PersonIssueType),
      args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        const query = {};
        if (parent.person_issue_id_list) {
          query._id =  { $in: parent.person_issue_id_list };
        }
        else {
          query.person_id = parent._id;
        }
        return await PersonIssue.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
      },
    },


  }),
});

const PersonCreateInput = new GraphQLInputObjectType({
  name: 'PersonCreateInput',
  description: '',
  fields: {
    first_name: { type: GraphQLString  },
    last_name: { type: GraphQLString  },
    middle_name: { type: GraphQLString  },
    birthday: { type: GraphQLDate  },
    email: { type: GraphQLString  },
    password: { type: GraphQLString  },
    is_admin: { type: GraphQLBoolean  },
    created_at: { type: GraphQLDateTime  },
    updated_at: { type: GraphQLDateTime  },
    profile_photo_url: { type: GraphQLUpload  },
  }
});

const PersonUpdateInput = new GraphQLInputObjectType({
  name: 'PersonUpdateInput',
  description: '',
  fields: {
    first_name: { type: GraphQLString  },
    last_name: { type: GraphQLString  },
    middle_name: { type: GraphQLString  },
    birthday: { type: GraphQLDate  },
    email: { type: GraphQLString  },
    password: { type: GraphQLString  },
    is_admin: { type: GraphQLBoolean  },
    created_at: { type: GraphQLDateTime  },
    updated_at: { type: GraphQLDateTime  },
    profile_photo_url: { type: GraphQLUpload  },
  }
});

const TicketType = new GraphQLObjectType({
  name: 'Ticket',
  description: 'Represent ticket created by person',
  fields: () => ({
    _id: { type: GraphQLInt  },
    message: { type: GraphQLString  },
    person_id: { type: GraphQLInt  },
    created_at: { type: GraphQLDateTime  },

    person: {
      type: PersonType,
      args: { _id: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        return await Person.findOne({_id: parent.person_id})
      },
    },

  }),
});

const TicketCreateInput = new GraphQLInputObjectType({
  name: 'TicketCreateInput',
  description: '',
  fields: {
    message: { type: new GraphQLNonNull(GraphQLString)  },
    person_id: { type: new GraphQLNonNull(GraphQLInt)  },
    created_at: { type: GraphQLDateTime  },
  }
});

const TicketUpdateInput = new GraphQLInputObjectType({
  name: 'TicketUpdateInput',
  description: '',
  fields: {
    message: { type: GraphQLString  },
    person_id: { type: GraphQLInt  },
    created_at: { type: GraphQLDateTime  },
  }
});

const RoleType = new GraphQLObjectType({
  name: 'Role',
  description: 'Represents UniRoomy person role. 1 - student, 2 - landlord',
  fields: () => ({
    _id: { type: GraphQLInt  },
    name: { type: GraphQLString  },

    persons: {
      type: new GraphQLList(PersonType),
      args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        const query = {};
        if (parent.person_id_list) {
          query._id =  { $in: parent.person_id_list };
        }
        else {
          query.role_id = parent._id;
        }
        return await Person.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
      },
    },


  }),
});

const RoleCreateInput = new GraphQLInputObjectType({
  name: 'RoleCreateInput',
  description: '',
  fields: {
    name: { type: new GraphQLNonNull(GraphQLString)  },
  }
});

const RoleUpdateInput = new GraphQLInputObjectType({
  name: 'RoleUpdateInput',
  description: '',
  fields: {
    name: { type: GraphQLString  },
  }
});

const StudentType = new GraphQLObjectType({
  name: 'Student',
  description: 'Represents student',
  fields: () => ({
    _id: { type: GraphQLInt  },
    university_id: { type: GraphQLInt  },
    status_id: { type: GraphQLInt  },
    verified: { type: GraphQLBoolean  },
    tokens: { type: GraphQLInt  },
    uni_email: { type: GraphQLString  },
    uni_email_verified: { type: GraphQLBoolean  },
    uni_verification_token: { type: GraphQLString  },
    review_request_date: { type: GraphQLDateTime , description: 'A date when new request for the review should be sent to the student',  },

    person: {
      type: PersonType,
      args: { _id: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        return await Person.findOne({_id: parent._id})
      },
    },
    university: {
      type: UniversityType,
      args: { _id: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        return await University.findOne({_id: parent.university_id})
      },
    },
    status: {
      type: StatusType,
      args: { _id: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        return await Status.findOne({_id: parent.status_id})
      },
    },
    reviews: {
      type: new GraphQLList(ReviewType),
      args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        const query = {};
        if (parent.review_id_list) {
          query._id =  { $in: parent.review_id_list };
        }
        else {
          query.student_id = parent._id;
        }
        return await Review.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
      },
    },

    studentAchievements: {
      type: new GraphQLList(StudentAchievementType),
      args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        const query = {};
        if (parent.student_achievement_id_list) {
          query._id =  { $in: parent.student_achievement_id_list };
        }
        else {
          query.student_id = parent._id;
        }
        return await StudentAchievement.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
      },
    },

    favoriteHouses: {
      type: new GraphQLList(FavoriteHouseType),
      args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        const query = {};
        if (parent.favorite_house_id_list) {
          query._id =  { $in: parent.favorite_house_id_list };
        }
        else {
          query.student_id = parent._id;
        }
        return await FavoriteHouse.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
      },
    },

    elementPreferences: {
      type: new GraphQLList(ElementPreferenceType),
      args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        const query = {};
        if (parent.element_preference_id_list) {
          query._id =  { $in: parent.element_preference_id_list };
        }
        else {
          query.student_id = parent._id;
        }
        query.student_id = context.user ? context.user.person_id : null;
        return await ElementPreference.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
      },
    },


  }),
});

const StudentCreateInput = new GraphQLInputObjectType({
  name: 'StudentCreateInput',
  description: '',
  fields: {
    _id: { type: GraphQLInt  },
    university_id: { type: GraphQLInt  },
    status_id: { type: GraphQLInt  },
    verified: { type: GraphQLBoolean  },
    tokens: { type: GraphQLInt  },
    uni_email: { type: GraphQLString  },
    uni_email_verified: { type: GraphQLBoolean  },
    uni_verification_token: { type: GraphQLString  },
    review_request_date: { type: GraphQLDateTime , description: 'A date when new request for the review should be sent to the student',  },
    person : { type: PersonUpdateInput }
  }
});

const StudentUpdateInput = new GraphQLInputObjectType({
  name: 'StudentUpdateInput',
  description: '',
  fields: {
    _id: { type: GraphQLInt  },
    university_id: { type: GraphQLInt  },
    status_id: { type: GraphQLInt  },
    verified: { type: GraphQLBoolean  },
    tokens: { type: GraphQLInt  },
    uni_email: { type: GraphQLString  },
    uni_email_verified: { type: GraphQLBoolean  },
    uni_verification_token: { type: GraphQLString  },
    review_request_date: { type: GraphQLDateTime , description: 'A date when new request for the review should be sent to the student',  },
    person : { type: PersonUpdateInput }
  }
});

const StatusType = new GraphQLObjectType({
  name: 'Status',
  description: 'Represents student status: 1 - Not a Student, 2 - Prospective Student, 3 - Undergraduate Student, 4 - Graduated Student',
  fields: () => ({
    _id: { type: GraphQLInt  },
    name: { type: GraphQLString  },

    students: {
      type: new GraphQLList(StudentType),
      args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        const query = {};
        if (parent.student_id_list) {
          query._id =  { $in: parent.student_id_list };
        }
        else {
          query.status_id = parent._id;
        }
        return await Student.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
      },
    },


  }),
});

const StatusCreateInput = new GraphQLInputObjectType({
  name: 'StatusCreateInput',
  description: '',
  fields: {
    name: { type: new GraphQLNonNull(GraphQLString)  },
  }
});

const StatusUpdateInput = new GraphQLInputObjectType({
  name: 'StatusUpdateInput',
  description: '',
  fields: {
    name: { type: GraphQLString  },
  }
});

const LandlordType = new GraphQLObjectType({
  name: 'Landlord',
  description: 'Represents landlord',
  fields: () => ({
    _id: { type: GraphQLInt  },
    landlord_kind_id: { type: GraphQLInt  },
    company_name: { type: GraphQLString  },
    company_description: { type: GraphQLString  },
    responsible_for_houses: { type: GraphQLInt  },
    responsible_for_beds: { type: GraphQLInt  },
    contact_name: { type: GraphQLString  },
    contact_number: { type: GraphQLString  },
    contact_email: { type: GraphQLString  },

    person: {
      type: PersonType,
      args: { _id: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        return await Person.findOne({_id: parent._id})
      },
    },
    landlord_kind: {
      type: LandlordKindType,
      args: { _id: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        return await LandlordKind.findOne({_id: parent.landlord_kind_id})
      },
    },
    houses: {
      type: new GraphQLList(HouseType),
      args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        const query = {};
        if (parent.house_id_list) {
          query._id =  { $in: parent.house_id_list };
        }
        else {
          query.landlord_id = parent._id;
        }
        return await House.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
      },
    },


  }),
});

const LandlordCreateInput = new GraphQLInputObjectType({
  name: 'LandlordCreateInput',
  description: '',
  fields: {
    _id: { type: GraphQLInt  },
    landlord_kind_id: { type: GraphQLInt  },
    company_name: { type: GraphQLString  },
    company_description: { type: GraphQLString  },
    responsible_for_houses: { type: GraphQLInt  },
    responsible_for_beds: { type: GraphQLInt  },
    contact_name: { type: GraphQLString  },
    contact_number: { type: GraphQLString  },
    contact_email: { type: GraphQLString  },
    person : { type: PersonUpdateInput }
  }
});

const LandlordUpdateInput = new GraphQLInputObjectType({
  name: 'LandlordUpdateInput',
  description: '',
  fields: {
    _id: { type: GraphQLInt  },
    landlord_kind_id: { type: GraphQLInt  },
    company_name: { type: GraphQLString  },
    company_description: { type: GraphQLString  },
    responsible_for_houses: { type: GraphQLInt  },
    responsible_for_beds: { type: GraphQLInt  },
    contact_name: { type: GraphQLString  },
    contact_number: { type: GraphQLString  },
    contact_email: { type: GraphQLString  },
    person : { type: PersonUpdateInput }
  }
});

const LandlordKindType = new GraphQLObjectType({
  name: 'LandlordKind',
  description: 'Type of Landlord: 1 - Landlord, 2 - Property Developer, 3 - Letting Agency, 4 - University',
  fields: () => ({
    _id: { type: GraphQLInt  },
    name: { type: GraphQLString  },

    landlords: {
      type: new GraphQLList(LandlordType),
      args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        const query = {};
        if (parent.landlord_id_list) {
          query._id =  { $in: parent.landlord_id_list };
        }
        else {
          query.landlord_kind_id = parent._id;
        }
        return await Landlord.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
      },
    },


  }),
});

const LandlordKindCreateInput = new GraphQLInputObjectType({
  name: 'LandlordKindCreateInput',
  description: '',
  fields: {
    name: { type: new GraphQLNonNull(GraphQLString)  },
  }
});

const LandlordKindUpdateInput = new GraphQLInputObjectType({
  name: 'LandlordKindUpdateInput',
  description: '',
  fields: {
    name: { type: GraphQLString  },
  }
});

const HouseType = new GraphQLObjectType({
  name: 'House',
  description: 'Represents house',
  fields: () => ({
    _id: { type: GraphQLInt  },
    landlord_id: { type: GraphQLInt  },
    name: { type: GraphQLString , description: 'A name of a house. Probably this field is not necessary. It depends on frontend implementation.',  },
    description: { type: GraphQLString  },
    house_kind_id: { type: GraphQLInt  },
    city: { type: GraphQLString  },
    street: { type: GraphQLString  },
    post_code: { type: GraphQLString  },
    address: { type: GraphQLString  },
    bathes: { type: GraphQLInt  },
    rating: { type: GraphQLFloat  },
    deposit: { type: GraphQLFloat  },
    Hr: { type: GraphQLFloat , description: 'House Rank. Used for sorting search results by relevance to search criteria. This field is only filled when called by search_houses query' },
    key_ratings: { type: ObjectScalarType , description: 'Key Ratings' },

    landlord: {
      type: LandlordType,
      args: { _id: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        return await Landlord.findOne({_id: parent.landlord_id})
      },
    },
    house_kind: {
      type: HouseKindType,
      args: { _id: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        return await HouseKind.findOne({_id: parent.house_kind_id})
      },
    },
    bedrooms: {
      type: new GraphQLList(BedroomType),
      args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        const query = {};
        if (parent.bedroom_id_list) {
          query._id =  { $in: parent.bedroom_id_list };
        }
        else {
          query.house_id = parent._id;
        }
        return await Bedroom.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
      },
    },

    houseUniversities: {
      type: new GraphQLList(HouseUniversityType),
      args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        const query = {};
        if (parent.house_university_id_list) {
          query._id =  { $in: parent.house_university_id_list };
        }
        else {
          query.house_id = parent._id;
        }
        return await HouseUniversity.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
      },
    },

    reviews: {
      type: new GraphQLList(ReviewType),
      args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        const query = {};
        if (parent.review_id_list) {
          query._id =  { $in: parent.review_id_list };
        }
        else {
          query.house_id = parent._id;
        }
        return await Review.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
      },
    },

    houseFacts: {
      type: new GraphQLList(HouseFactType),
      args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        const query = {};
        if (parent.house_fact_id_list) {
          query._id =  { $in: parent.house_fact_id_list };
        }
        else {
          query.house_id = parent._id;
        }
        return await HouseFact.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
      },
    },

    housePhotos: {
      type: new GraphQLList(HousePhotoType),
      args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        const query = {};
        if (parent.house_photo_id_list) {
          query._id =  { $in: parent.house_photo_id_list };
        }
        else {
          query.house_id = parent._id;
        }
        return await HousePhoto.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
      },
    },

    houseBills: {
      type: new GraphQLList(HouseBillType),
      args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        const query = {};
        if (parent.house_bill_id_list) {
          query._id =  { $in: parent.house_bill_id_list };
        }
        else {
          query.house_id = parent._id;
        }
        return await HouseBill.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
      },
    },

    favoriteHouses: {
      type: new GraphQLList(FavoriteHouseType),
      args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        const query = {};
        if (parent.favorite_house_id_list) {
          query._id =  { $in: parent.favorite_house_id_list };
        }
        else {
          query.house_id = parent._id;
        }
        return await FavoriteHouse.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
      },
    },

    houseElements: {
      type: new GraphQLList(HouseElementType),
      args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        const query = {};
        if (parent.house_element_id_list) {
          query._id =  { $in: parent.house_element_id_list };
        }
        else {
          query.house_id = parent._id;
        }
        return await HouseElement.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
      },
    },


  }),
});

const HouseCreateInput = new GraphQLInputObjectType({
  name: 'HouseCreateInput',
  description: '',
  fields: {
    landlord_id: { type: new GraphQLNonNull(GraphQLInt)  },
    name: { type: GraphQLString , description: 'A name of a house. Probably this field is not necessary. It depends on frontend implementation.',  },
    description: { type: GraphQLString  },
    house_kind_id: { type: GraphQLInt  },
    city: { type: GraphQLString  },
    street: { type: GraphQLString  },
    post_code: { type: GraphQLString  },
    address: { type: GraphQLString  },
    bathes: { type: GraphQLInt  },
    rating: { type: GraphQLFloat  },
    deposit: { type: GraphQLFloat  },
  }
});

const HouseUpdateInput = new GraphQLInputObjectType({
  name: 'HouseUpdateInput',
  description: '',
  fields: {
    landlord_id: { type: GraphQLInt  },
    name: { type: GraphQLString , description: 'A name of a house. Probably this field is not necessary. It depends on frontend implementation.',  },
    description: { type: GraphQLString  },
    house_kind_id: { type: GraphQLInt  },
    city: { type: GraphQLString  },
    street: { type: GraphQLString  },
    post_code: { type: GraphQLString  },
    address: { type: GraphQLString  },
    bathes: { type: GraphQLInt  },
    rating: { type: GraphQLFloat  },
    deposit: { type: GraphQLFloat  },
  }
});

const HouseKindType = new GraphQLObjectType({
  name: 'HouseKind',
  description: '',
  fields: () => ({
    _id: { type: GraphQLInt  },
    name: { type: GraphQLString  },

    houses: {
      type: new GraphQLList(HouseType),
      args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        const query = {};
        if (parent.house_id_list) {
          query._id =  { $in: parent.house_id_list };
        }
        else {
          query.house_kind_id = parent._id;
        }
        return await House.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
      },
    },


  }),
});

const HouseKindCreateInput = new GraphQLInputObjectType({
  name: 'HouseKindCreateInput',
  description: '',
  fields: {
    name: { type: GraphQLString  },
  }
});

const HouseKindUpdateInput = new GraphQLInputObjectType({
  name: 'HouseKindUpdateInput',
  description: '',
  fields: {
    name: { type: GraphQLString  },
  }
});

const HousePhotoType = new GraphQLObjectType({
  name: 'HousePhoto',
  description: 'Represents house photos',
  fields: () => ({
    _id: { type: GraphQLInt  },
    url: { type: GraphQLString  },
    house_id: { type: GraphQLInt  },
    is_main: { type: GraphQLBoolean  },
    sort_order: { type: GraphQLInt  },

    house: {
      type: HouseType,
      args: { _id: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        return await House.findOne({_id: parent.house_id})
      },
    },

  }),
});

const HousePhotoCreateInput = new GraphQLInputObjectType({
  name: 'HousePhotoCreateInput',
  description: '',
  fields: {
    url: { type: new GraphQLNonNull(GraphQLUpload)  },
    house_id: { type: new GraphQLNonNull(GraphQLInt)  },
    is_main: { type: GraphQLBoolean  },
    sort_order: { type: GraphQLInt  },
  }
});

const HousePhotoUpdateInput = new GraphQLInputObjectType({
  name: 'HousePhotoUpdateInput',
  description: '',
  fields: {
    url: { type: GraphQLUpload  },
    house_id: { type: GraphQLInt  },
    is_main: { type: GraphQLBoolean  },
    sort_order: { type: GraphQLInt  },
  }
});

const BedroomPhotoType = new GraphQLObjectType({
  name: 'BedroomPhoto',
  description: 'Represents bedroom photos',
  fields: () => ({
    _id: { type: GraphQLInt  },
    url: { type: GraphQLString  },
    bedroom_id: { type: GraphQLInt  },

    bedroom: {
      type: BedroomType,
      args: { _id: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        return await Bedroom.findOne({_id: parent.bedroom_id})
      },
    },

  }),
});

const BedroomPhotoCreateInput = new GraphQLInputObjectType({
  name: 'BedroomPhotoCreateInput',
  description: '',
  fields: {
    url: { type: new GraphQLNonNull(GraphQLUpload)  },
    bedroom_id: { type: new GraphQLNonNull(GraphQLInt)  },
  }
});

const BedroomPhotoUpdateInput = new GraphQLInputObjectType({
  name: 'BedroomPhotoUpdateInput',
  description: '',
  fields: {
    url: { type: GraphQLUpload  },
    bedroom_id: { type: GraphQLInt  },
  }
});

const FactGroupType = new GraphQLObjectType({
  name: 'FactGroup',
  description: 'Group of facts',
  fields: () => ({
    _id: { type: GraphQLInt  },
    name: { type: GraphQLString  },

    elements: {
      type: new GraphQLList(ElementType),
      args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        const query = {};
        if (parent.element_id_list) {
          query._id =  { $in: parent.element_id_list };
        }
        else {
          query.fact_group_id = parent._id;
        }
        return await Element.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
      },
    },


  }),
});

const FactGroupCreateInput = new GraphQLInputObjectType({
  name: 'FactGroupCreateInput',
  description: '',
  fields: {
    name: { type: new GraphQLNonNull(GraphQLString)  },
  }
});

const FactGroupUpdateInput = new GraphQLInputObjectType({
  name: 'FactGroupUpdateInput',
  description: '',
  fields: {
    name: { type: GraphQLString  },
  }
});

const HouseFactType = new GraphQLObjectType({
  name: 'HouseFact',
  description: 'Represents fact about a house',
  fields: () => ({
    _id: { type: GraphQLInt  },
    house_id: { type: GraphQLInt  },
    element_id: { type: GraphQLInt  },

    house: {
      type: HouseType,
      args: { _id: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        return await House.findOne({_id: parent.house_id})
      },
    },
    element: {
      type: ElementType,
      args: { _id: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        return await Element.findOne({_id: parent.element_id})
      },
    },

  }),
});

const HouseFactCreateInput = new GraphQLInputObjectType({
  name: 'HouseFactCreateInput',
  description: '',
  fields: {
    house_id: { type: new GraphQLNonNull(GraphQLInt)  },
    element_id: { type: new GraphQLNonNull(GraphQLInt)  },
  }
});

const HouseFactUpdateInput = new GraphQLInputObjectType({
  name: 'HouseFactUpdateInput',
  description: '',
  fields: {
    house_id: { type: GraphQLInt  },
    element_id: { type: GraphQLInt  },
  }
});

const HouseUniversityType = new GraphQLObjectType({
  name: 'HouseUniversity',
  description: 'For wich university the house is available for search',
  fields: () => ({
    _id: { type: GraphQLInt  },
    house_id: { type: GraphQLInt  },
    university_id: { type: GraphQLInt  },
    commute_time_by_car: { type: GraphQLInt  },
    commute_time_by_walk: { type: GraphQLInt  },
    commute_time_by_bus: { type: GraphQLInt  },

    house: {
      type: HouseType,
      args: { _id: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        return await House.findOne({_id: parent.house_id})
      },
    },
    university: {
      type: UniversityType,
      args: { _id: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        return await University.findOne({_id: parent.university_id})
      },
    },

  }),
});

const HouseUniversityCreateInput = new GraphQLInputObjectType({
  name: 'HouseUniversityCreateInput',
  description: '',
  fields: {
    house_id: { type: new GraphQLNonNull(GraphQLInt)  },
    university_id: { type: new GraphQLNonNull(GraphQLInt)  },
    commute_time_by_car: { type: GraphQLInt  },
    commute_time_by_walk: { type: GraphQLInt  },
    commute_time_by_bus: { type: GraphQLInt  },
  }
});

const HouseUniversityUpdateInput = new GraphQLInputObjectType({
  name: 'HouseUniversityUpdateInput',
  description: '',
  fields: {
    house_id: { type: GraphQLInt  },
    university_id: { type: GraphQLInt  },
    commute_time_by_car: { type: GraphQLInt  },
    commute_time_by_walk: { type: GraphQLInt  },
    commute_time_by_bus: { type: GraphQLInt  },
  }
});

const BedroomType = new GraphQLObjectType({
  name: 'Bedroom',
  description: 'Bedroom of a house',
  fields: () => ({
    _id: { type: GraphQLInt  },
    house_id: { type: GraphQLInt  },
    name: { type: GraphQLString  },
    beds: { type: GraphQLInt  },
    baths: { type: GraphQLInt  },
    weekly_price: { type: GraphQLFloat  },
    monthly_price: { type: GraphQLFloat  },
    rating: { type: GraphQLFloat  },
    contract_length: { type: GraphQLInt  },
    contract_starts: { type: GraphQLDate  },
    contract_ends: { type: GraphQLDate  },
    occupied: { type: GraphQLBoolean  },
    deposit: { type: GraphQLFloat  },

    house: {
      type: HouseType,
      args: { _id: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        return await House.findOne({_id: parent.house_id})
      },
    },
    bedroomPhotos: {
      type: new GraphQLList(BedroomPhotoType),
      args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        const query = {};
        if (parent.bedroom_photo_id_list) {
          query._id =  { $in: parent.bedroom_photo_id_list };
        }
        else {
          query.bedroom_id = parent._id;
        }
        return await BedroomPhoto.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
      },
    },


  }),
});

const BedroomCreateInput = new GraphQLInputObjectType({
  name: 'BedroomCreateInput',
  description: '',
  fields: {
    house_id: { type: new GraphQLNonNull(GraphQLInt)  },
    name: { type: GraphQLString  },
    beds: { type: GraphQLInt  },
    baths: { type: GraphQLInt  },
    weekly_price: { type: GraphQLFloat  },
    monthly_price: { type: GraphQLFloat  },
    rating: { type: GraphQLFloat  },
    contract_length: { type: GraphQLInt  },
    contract_starts: { type: GraphQLDate  },
    contract_ends: { type: GraphQLDate  },
    occupied: { type: GraphQLBoolean  },
    deposit: { type: GraphQLFloat  },
  }
});

const BedroomUpdateInput = new GraphQLInputObjectType({
  name: 'BedroomUpdateInput',
  description: '',
  fields: {
    house_id: { type: GraphQLInt  },
    name: { type: GraphQLString  },
    beds: { type: GraphQLInt  },
    baths: { type: GraphQLInt  },
    weekly_price: { type: GraphQLFloat  },
    monthly_price: { type: GraphQLFloat  },
    rating: { type: GraphQLFloat  },
    contract_length: { type: GraphQLInt  },
    contract_starts: { type: GraphQLDate  },
    contract_ends: { type: GraphQLDate  },
    occupied: { type: GraphQLBoolean  },
    deposit: { type: GraphQLFloat  },
  }
});

const CategoryType = new GraphQLObjectType({
  name: 'Category',
  description: 'Category of element',
  fields: () => ({
    _id: { type: GraphQLInt  },
    parent_id: { type: GraphQLInt  },
    name: { type: GraphQLString  },

    category: {
      type: CategoryType,
      args: { _id: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        return await Category.findOne({_id: parent.parent_id})
      },
    },
    elements: {
      type: new GraphQLList(ElementType),
      args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        const query = {};
        if (parent.element_id_list) {
          query._id =  { $in: parent.element_id_list };
        }
        else {
          query.category_id = parent._id;
        }
        return await Element.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
      },
    },

    categories: {
      type: new GraphQLList(CategoryType),
      args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        const query = {};
        if (parent.category_id_list) {
          query._id =  { $in: parent.category_id_list };
        }
        else {
          query.parent_id = parent._id;
        }
        query.parent_id = parent &amp;&amp; parent._id ? parent._id : null;;
        return await Category.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
      },
    },


  }),
});

const CategoryCreateInput = new GraphQLInputObjectType({
  name: 'CategoryCreateInput',
  description: '',
  fields: {
    parent_id: { type: GraphQLInt  },
    name: { type: new GraphQLNonNull(GraphQLString)  },
  }
});

const CategoryUpdateInput = new GraphQLInputObjectType({
  name: 'CategoryUpdateInput',
  description: '',
  fields: {
    parent_id: { type: GraphQLInt  },
    name: { type: GraphQLString  },
  }
});

const ElementType = new GraphQLObjectType({
  name: 'Element',
  description: 'Represents element. Element describes one of characteristics of a house.',
  fields: () => ({
    _id: { type: GraphQLInt  },
    name: { type: GraphQLString  },
    category_id: { type: GraphQLInt  },
    fact_group_id: { type: GraphQLInt  },
    is_fact: { type: GraphQLInt  },
    preferable: { type: GraphQLBoolean  },
    type_id: { type: GraphQLInt  },
    fact_group_sort_order: { type: GraphQLInt  },
    category_sort_order: { type: GraphQLInt  },

    category: {
      type: CategoryType,
      args: { _id: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        return await Category.findOne({_id: parent.category_id})
      },
    },
    fact_group: {
      type: FactGroupType,
      args: { _id: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        return await FactGroup.findOne({_id: parent.fact_group_id})
      },
    },
    element_kind: {
      type: ElementKindType,
      args: { _id: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        return await ElementKind.findOne({id: parent.type_id})
      },
    },
    reviewHouseElements: {
      type: new GraphQLList(ReviewHouseElementType),
      args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        const query = {};
        if (parent.review_house_element_id_list) {
          query._id =  { $in: parent.review_house_element_id_list };
        }
        else {
          query.element_id = parent._id;
        }
        return await ReviewHouseElement.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
      },
    },

    elementPreferences: {
      type: new GraphQLList(ElementPreferenceType),
      args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        const query = {};
        if (parent.element_preference_id_list) {
          query._id =  { $in: parent.element_preference_id_list };
        }
        else {
          query.element_id = parent._id;
        }
        query.student_id = context.user ? context.user.person_id : null;
        return await ElementPreference.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
      },
    },

    houseElements: {
      type: new GraphQLList(HouseElementType),
      args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        const query = {};
        if (parent.house_element_id_list) {
          query._id =  { $in: parent.house_element_id_list };
        }
        else {
          query.element_id = parent._id;
        }
        return await HouseElement.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
      },
    },

    houseFacts: {
      type: new GraphQLList(HouseFactType),
      args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        const query = {};
        if (parent.house_fact_id_list) {
          query._id =  { $in: parent.house_fact_id_list };
        }
        else {
          query.element_id = parent._id;
        }
        return await HouseFact.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
      },
    },


  }),
});

const ElementCreateInput = new GraphQLInputObjectType({
  name: 'ElementCreateInput',
  description: '',
  fields: {
    name: { type: new GraphQLNonNull(GraphQLString)  },
    category_id: { type: new GraphQLNonNull(GraphQLInt)  },
    fact_group_id: { type: GraphQLInt  },
    is_fact: { type: GraphQLInt  },
    preferable: { type: GraphQLBoolean  },
    type_id: { type: GraphQLInt  },
    fact_group_sort_order: { type: GraphQLInt  },
    category_sort_order: { type: GraphQLInt  },
  }
});

const ElementUpdateInput = new GraphQLInputObjectType({
  name: 'ElementUpdateInput',
  description: '',
  fields: {
    name: { type: GraphQLString  },
    category_id: { type: GraphQLInt  },
    fact_group_id: { type: GraphQLInt  },
    is_fact: { type: GraphQLInt  },
    preferable: { type: GraphQLBoolean  },
    type_id: { type: GraphQLInt  },
    fact_group_sort_order: { type: GraphQLInt  },
    category_sort_order: { type: GraphQLInt  },
  }
});

const ElementKindType = new GraphQLObjectType({
  name: 'ElementKind',
  description: 'Represents element type. (used word "kind" instead of "type" because of entity type name collisions)',
  fields: () => ({
    id: { type: GraphQLInt  },
    name: { type: GraphQLString  },
    from: { type: GraphQLInt  },
    to: { type: GraphQLInt  },
    values: { type: new GraphQLList(GraphQLString)  },

    elements: {
      type: new GraphQLList(ElementType),
      args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        const query = {};
        if (parent.element_id_list) {
          query._id =  { $in: parent.element_id_list };
        }
        else {
          query.type_id = parent.id;
        }
        return await Element.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
      },
    },


  }),
});

const ElementKindCreateInput = new GraphQLInputObjectType({
  name: 'ElementKindCreateInput',
  description: '',
  fields: {
    name: { type: GraphQLString  },
    from: { type: GraphQLInt  },
    to: { type: GraphQLInt  },
    values: { type: new GraphQLList(GraphQLString)  },
  }
});

const ElementKindUpdateInput = new GraphQLInputObjectType({
  name: 'ElementKindUpdateInput',
  description: '',
  fields: {
    name: { type: GraphQLString  },
    from: { type: GraphQLInt  },
    to: { type: GraphQLInt  },
    values: { type: new GraphQLList(GraphQLString)  },
  }
});

const ElementPreferenceType = new GraphQLObjectType({
  name: 'ElementPreference',
  description: 'Represents student`s preferred element',
  fields: () => ({
    _id: { type: GraphQLInt  },
    student_id: { type: GraphQLInt  },
    element_id: { type: GraphQLInt  },
    element_weight: { type: GraphQLFloat  },
    value: { type: GraphQLInt  },

    student: {
      type: StudentType,
      args: { _id: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        return await Student.findOne({_id: parent.student_id})
      },
    },
    element: {
      type: ElementType,
      args: { _id: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        return await Element.findOne({_id: parent.element_id})
      },
    },

  }),
});

const ElementPreferenceCreateInput = new GraphQLInputObjectType({
  name: 'ElementPreferenceCreateInput',
  description: '',
  fields: {
    student_id: { type: new GraphQLNonNull(GraphQLInt)  },
    element_id: { type: new GraphQLNonNull(GraphQLInt)  },
    element_weight: { type: GraphQLFloat  },
    value: { type: GraphQLInt  },
  }
});

const ElementPreferenceUpdateInput = new GraphQLInputObjectType({
  name: 'ElementPreferenceUpdateInput',
  description: '',
  fields: {
    student_id: { type: GraphQLInt  },
    element_id: { type: GraphQLInt  },
    element_weight: { type: GraphQLFloat  },
    value: { type: GraphQLInt  },
  }
});

const AchievementType = new GraphQLObjectType({
  name: 'Achievement',
  description: 'Represents possible achievement',
  fields: () => ({
    _id: { type: GraphQLInt  },
    name: { type: GraphQLString  },

    studentAchievements: {
      type: new GraphQLList(StudentAchievementType),
      args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        const query = {};
        if (parent.student_achievement_id_list) {
          query._id =  { $in: parent.student_achievement_id_list };
        }
        else {
          query.achievement_id = parent._id;
        }
        return await StudentAchievement.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
      },
    },


  }),
});

const AchievementCreateInput = new GraphQLInputObjectType({
  name: 'AchievementCreateInput',
  description: '',
  fields: {
    name: { type: new GraphQLNonNull(GraphQLString)  },
  }
});

const AchievementUpdateInput = new GraphQLInputObjectType({
  name: 'AchievementUpdateInput',
  description: '',
  fields: {
    name: { type: GraphQLString  },
  }
});

const StudentAchievementType = new GraphQLObjectType({
  name: 'StudentAchievement',
  description: 'Represents an achievement of a student',
  fields: () => ({
    _id: { type: GraphQLInt  },
    student_id: { type: GraphQLInt  },
    achievement_id: { type: GraphQLInt  },
    created_at: { type: GraphQLDateTime  },

    student: {
      type: StudentType,
      args: { _id: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        return await Student.findOne({_id: parent.student_id})
      },
    },
    achievement: {
      type: AchievementType,
      args: { _id: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        return await Achievement.findOne({_id: parent.achievement_id})
      },
    },

  }),
});

const StudentAchievementCreateInput = new GraphQLInputObjectType({
  name: 'StudentAchievementCreateInput',
  description: '',
  fields: {
    student_id: { type: new GraphQLNonNull(GraphQLInt)  },
    achievement_id: { type: new GraphQLNonNull(GraphQLInt)  },
    created_at: { type: GraphQLDateTime  },
  }
});

const StudentAchievementUpdateInput = new GraphQLInputObjectType({
  name: 'StudentAchievementUpdateInput',
  description: '',
  fields: {
    student_id: { type: GraphQLInt  },
    achievement_id: { type: GraphQLInt  },
    created_at: { type: GraphQLDateTime  },
  }
});

const ReviewType = new GraphQLObjectType({
  name: 'Review',
  description: 'Represents review of a house',
  fields: () => ({
    _id: { type: GraphQLInt  },
    student_id: { type: GraphQLInt  },
    house_id: { type: GraphQLInt  },
    description: { type: GraphQLString  },
    house_rating: { type: GraphQLInt  },
    created_at: { type: GraphQLDate  },

    review_comment: {
      type: ReviewCommentType,
      args: { _id: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        return await ReviewComment.findOne({review_id: parent._id})
      },
    },
    student: {
      type: StudentType,
      args: { _id: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        return await Student.findOne({_id: parent.student_id})
      },
    },
    house: {
      type: HouseType,
      args: { _id: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        return await House.findOne({_id: parent.house_id})
      },
    },
    reviewHouseElements: {
      type: new GraphQLList(ReviewHouseElementType),
      args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        const query = {};
        if (parent.review_house_element_id_list) {
          query._id =  { $in: parent.review_house_element_id_list };
        }
        else {
          query.review_id = parent._id;
        }
        return await ReviewHouseElement.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
      },
    },


  }),
});

const ReviewCreateInput = new GraphQLInputObjectType({
  name: 'ReviewCreateInput',
  description: '',
  fields: {
    student_id: { type: new GraphQLNonNull(GraphQLInt)  },
    house_id: { type: new GraphQLNonNull(GraphQLInt)  },
    description: { type: new GraphQLNonNull(GraphQLString)  },
    house_rating: { type: new GraphQLNonNull(GraphQLInt)  },
    created_at: { type: GraphQLDate  },
  }
});

const ReviewUpdateInput = new GraphQLInputObjectType({
  name: 'ReviewUpdateInput',
  description: '',
  fields: {
    student_id: { type: GraphQLInt  },
    house_id: { type: GraphQLInt  },
    description: { type: GraphQLString  },
    house_rating: { type: GraphQLInt  },
    created_at: { type: GraphQLDate  },
  }
});

const ReviewCommentType = new GraphQLObjectType({
  name: 'ReviewComment',
  description: '',
  fields: () => ({
    _id: { type: GraphQLInt  },
    review_id: { type: GraphQLInt  },
    message: { type: GraphQLString  },

    reviews: {
      type: new GraphQLList(ReviewType),
      args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        const query = {};
        if (parent.review_id_list) {
          query._id =  { $in: parent.review_id_list };
        }
        else {
          query._id = parent.review_id;
        }
        return await Review.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
      },
    },


  }),
});

const ReviewCommentCreateInput = new GraphQLInputObjectType({
  name: 'ReviewCommentCreateInput',
  description: '',
  fields: {
    review_id: { type: new GraphQLNonNull(GraphQLInt)  },
    message: { type: GraphQLString  },
  }
});

const ReviewCommentUpdateInput = new GraphQLInputObjectType({
  name: 'ReviewCommentUpdateInput',
  description: '',
  fields: {
    review_id: { type: GraphQLInt  },
    message: { type: GraphQLString  },
  }
});

const ReviewHouseElementType = new GraphQLObjectType({
  name: 'ReviewHouseElement',
  description: 'Represents an element of review of a house',
  fields: () => ({
    _id: { type: GraphQLInt  },
    review_id: { type: GraphQLInt  },
    element_id: { type: GraphQLInt  },
    element_rating: { type: GraphQLInt  },
    reviewer_element_weight: { type: GraphQLInt  },

    review: {
      type: ReviewType,
      args: { _id: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        return await Review.findOne({_id: parent.review_id})
      },
    },
    element: {
      type: ElementType,
      args: { _id: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        return await Element.findOne({_id: parent.element_id})
      },
    },

  }),
});

const ReviewHouseElementCreateInput = new GraphQLInputObjectType({
  name: 'ReviewHouseElementCreateInput',
  description: '',
  fields: {
    review_id: { type: new GraphQLNonNull(GraphQLInt)  },
    element_id: { type: new GraphQLNonNull(GraphQLInt)  },
    element_rating: { type: new GraphQLNonNull(GraphQLInt)  },
    reviewer_element_weight: { type: GraphQLInt  },
  }
});

const ReviewHouseElementUpdateInput = new GraphQLInputObjectType({
  name: 'ReviewHouseElementUpdateInput',
  description: '',
  fields: {
    review_id: { type: GraphQLInt  },
    element_id: { type: GraphQLInt  },
    element_rating: { type: GraphQLInt  },
    reviewer_element_weight: { type: GraphQLInt  },
  }
});

const HouseElementType = new GraphQLObjectType({
  name: 'HouseElement',
  description: '',
  fields: () => ({
    _id: { type: GraphQLInt  },
    element_id: { type: GraphQLInt  },
    house_id: { type: GraphQLInt  },
    normalized_average_rating: { type: GraphQLFloat  },

    element: {
      type: ElementType,
      args: { _id: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        return await Element.findOne({_id: parent.element_id})
      },
    },
    house: {
      type: HouseType,
      args: { _id: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        return await House.findOne({_id: parent.house_id})
      },
    },

  }),
});

const HouseElementCreateInput = new GraphQLInputObjectType({
  name: 'HouseElementCreateInput',
  description: '',
  fields: {
    element_id: { type: new GraphQLNonNull(GraphQLInt)  },
    house_id: { type: new GraphQLNonNull(GraphQLInt)  },
    normalized_average_rating: { type: GraphQLFloat  },
  }
});

const HouseElementUpdateInput = new GraphQLInputObjectType({
  name: 'HouseElementUpdateInput',
  description: '',
  fields: {
    element_id: { type: GraphQLInt  },
    house_id: { type: GraphQLInt  },
    normalized_average_rating: { type: GraphQLFloat  },
  }
});

const NotificationType = new GraphQLObjectType({
  name: 'Notification',
  description: 'Represents notification of a person',
  fields: () => ({
    _id: { type: GraphQLInt  },
    person_id: { type: GraphQLInt  },
    title: { type: GraphQLString  },
    subtitle: { type: GraphQLString  },
    full_description: { type: GraphQLString  },
    action: { type: GraphQLString  },
    read: { type: GraphQLBoolean  },

    person: {
      type: PersonType,
      args: { _id: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        return await Person.findOne({_id: parent.person_id})
      },
    },

  }),
});

const NotificationCreateInput = new GraphQLInputObjectType({
  name: 'NotificationCreateInput',
  description: '',
  fields: {
    person_id: { type: new GraphQLNonNull(GraphQLInt)  },
    title: { type: GraphQLString  },
    subtitle: { type: GraphQLString  },
    full_description: { type: GraphQLString  },
    action: { type: GraphQLString  },
    read: { type: GraphQLBoolean  },
  }
});

const NotificationUpdateInput = new GraphQLInputObjectType({
  name: 'NotificationUpdateInput',
  description: '',
  fields: {
    person_id: { type: GraphQLInt  },
    title: { type: GraphQLString  },
    subtitle: { type: GraphQLString  },
    full_description: { type: GraphQLString  },
    action: { type: GraphQLString  },
    read: { type: GraphQLBoolean  },
  }
});

const BillType = new GraphQLObjectType({
  name: 'Bill',
  description: 'Represents possible bill wich could be included to rent',
  fields: () => ({
    _id: { type: GraphQLInt  },
    name: { type: GraphQLString  },

    houseBills: {
      type: new GraphQLList(HouseBillType),
      args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        const query = {};
        if (parent.house_bill_id_list) {
          query._id =  { $in: parent.house_bill_id_list };
        }
        else {
          query.bill_id = parent._id;
        }
        return await HouseBill.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
      },
    },


  }),
});

const BillCreateInput = new GraphQLInputObjectType({
  name: 'BillCreateInput',
  description: '',
  fields: {
    name: { type: new GraphQLNonNull(GraphQLString)  },
  }
});

const BillUpdateInput = new GraphQLInputObjectType({
  name: 'BillUpdateInput',
  description: '',
  fields: {
    name: { type: GraphQLString  },
  }
});

const HouseBillType = new GraphQLObjectType({
  name: 'HouseBill',
  description: 'Represents a bill included to rent of a house',
  fields: () => ({
    _id: { type: GraphQLInt  },
    house_id: { type: GraphQLInt  },
    bill_id: { type: GraphQLInt  },

    house: {
      type: HouseType,
      args: { _id: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        return await House.findOne({_id: parent.house_id})
      },
    },
    bill: {
      type: BillType,
      args: { _id: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        return await Bill.findOne({_id: parent.bill_id})
      },
    },

  }),
});

const HouseBillCreateInput = new GraphQLInputObjectType({
  name: 'HouseBillCreateInput',
  description: '',
  fields: {
    house_id: { type: new GraphQLNonNull(GraphQLInt)  },
    bill_id: { type: new GraphQLNonNull(GraphQLInt)  },
  }
});

const HouseBillUpdateInput = new GraphQLInputObjectType({
  name: 'HouseBillUpdateInput',
  description: '',
  fields: {
    house_id: { type: GraphQLInt  },
    bill_id: { type: GraphQLInt  },
  }
});

const FavoriteHouseType = new GraphQLObjectType({
  name: 'FavoriteHouse',
  description: 'Represents a favorite house of a student',
  fields: () => ({
    _id: { type: GraphQLInt  },
    house_id: { type: GraphQLInt  },
    student_id: { type: GraphQLInt  },

    house: {
      type: HouseType,
      args: { _id: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        return await House.findOne({_id: parent.house_id})
      },
    },
    student: {
      type: StudentType,
      args: { _id: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        return await Student.findOne({_id: parent.student_id})
      },
    },

  }),
});

const FavoriteHouseCreateInput = new GraphQLInputObjectType({
  name: 'FavoriteHouseCreateInput',
  description: '',
  fields: {
    house_id: { type: new GraphQLNonNull(GraphQLInt)  },
    student_id: { type: new GraphQLNonNull(GraphQLInt)  },
  }
});

const FavoriteHouseUpdateInput = new GraphQLInputObjectType({
  name: 'FavoriteHouseUpdateInput',
  description: '',
  fields: {
    house_id: { type: GraphQLInt  },
    student_id: { type: GraphQLInt  },
  }
});

const PersonIssueType = new GraphQLObjectType({
  name: 'PersonIssue',
  description: '',
  fields: () => ({
    _id: { type: GraphQLInt  },
    person_id: { type: GraphQLInt  },
    title: { type: GraphQLString  },
    message: { type: GraphQLString  },
    created_at: { type: GraphQLDateTime  },

    person: {
      type: PersonType,
      args: { _id: { type: GraphQLInt }, },
      async resolve(parent, args, context) {
        return await Person.findOne({_id: parent.person_id})
      },
    },

  }),
});

const PersonIssueCreateInput = new GraphQLInputObjectType({
  name: 'PersonIssueCreateInput',
  description: '',
  fields: {
    person_id: { type: new GraphQLNonNull(GraphQLInt)  },
    title: { type: GraphQLString  },
    message: { type: GraphQLString  },
    created_at: { type: GraphQLDateTime  },
  }
});

const PersonIssueUpdateInput = new GraphQLInputObjectType({
  name: 'PersonIssueUpdateInput',
  description: '',
  fields: {
    person_id: { type: GraphQLInt  },
    title: { type: GraphQLString  },
    message: { type: GraphQLString  },
    created_at: { type: GraphQLDateTime  },
  }
});

const queryFields = {
  university: {
    type: UniversityType,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      return await University.findOne({_id: args._id})
    },
  },
  universities: {
    type: new GraphQLList(UniversityType),
    args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      const query = {};
      return await University.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
    },
  },
  person: {
    type: PersonType,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      return await Person.findOne({_id: args._id})
    },
  },
  persons: {
    type: new GraphQLList(PersonType),
    args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      const query = {};
      return await Person.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
    },
  },
  ticket: {
    type: TicketType,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      return await Ticket.findOne({_id: args._id})
    },
  },
  tickets: {
    type: new GraphQLList(TicketType),
    args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      const query = {};
      return await Ticket.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
    },
  },
  role: {
    type: RoleType,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      return await Role.findOne({_id: args._id})
    },
  },
  roles: {
    type: new GraphQLList(RoleType),
    args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      const query = {};
      return await Role.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
    },
  },
  student: {
    type: StudentType,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      return await Student.findOne({_id: args._id})
    },
  },
  students: {
    type: new GraphQLList(StudentType),
    args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      const query = {};
      return await Student.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
    },
  },
  status: {
    type: StatusType,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      return await Status.findOne({_id: args._id})
    },
  },
  statuses: {
    type: new GraphQLList(StatusType),
    args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      const query = {};
      return await Status.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
    },
  },
  landlord: {
    type: LandlordType,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      return await Landlord.findOne({_id: args._id})
    },
  },
  landlords: {
    type: new GraphQLList(LandlordType),
    args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      const query = {};
      return await Landlord.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
    },
  },
  landlord_kind: {
    type: LandlordKindType,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      return await LandlordKind.findOne({_id: args._id})
    },
  },
  landlord_kinds: {
    type: new GraphQLList(LandlordKindType),
    args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      const query = {};
      return await LandlordKind.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
    },
  },
  house: {
    type: HouseType,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      return await House.findOne({_id: args._id})
    },
  },
  houses: {
    type: new GraphQLList(HouseType),
    args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      const query = {};
      return await House.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
    },
  },
  house_kind: {
    type: HouseKindType,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      return await HouseKind.findOne({_id: args._id})
    },
  },
  house_kinds: {
    type: new GraphQLList(HouseKindType),
    args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      const query = {};
      return await HouseKind.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
    },
  },
  house_photo: {
    type: HousePhotoType,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      return await HousePhoto.findOne({_id: args._id})
    },
  },
  house_photos: {
    type: new GraphQLList(HousePhotoType),
    args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      const query = {};
      return await HousePhoto.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
    },
  },
  bedroom_photo: {
    type: BedroomPhotoType,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      return await BedroomPhoto.findOne({_id: args._id})
    },
  },
  bedroom_photos: {
    type: new GraphQLList(BedroomPhotoType),
    args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      const query = {};
      return await BedroomPhoto.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
    },
  },
  fact_group: {
    type: FactGroupType,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      return await FactGroup.findOne({_id: args._id})
    },
  },
  fact_groups: {
    type: new GraphQLList(FactGroupType),
    args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      const query = {};
      return await FactGroup.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
    },
  },
  house_fact: {
    type: HouseFactType,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      return await HouseFact.findOne({_id: args._id})
    },
  },
  house_facts: {
    type: new GraphQLList(HouseFactType),
    args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      const query = {};
      return await HouseFact.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
    },
  },
  house_university: {
    type: HouseUniversityType,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      return await HouseUniversity.findOne({_id: args._id})
    },
  },
  house_universities: {
    type: new GraphQLList(HouseUniversityType),
    args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      const query = {};
      return await HouseUniversity.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
    },
  },
  bedroom: {
    type: BedroomType,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      return await Bedroom.findOne({_id: args._id})
    },
  },
  bedrooms: {
    type: new GraphQLList(BedroomType),
    args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      const query = {};
      return await Bedroom.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
    },
  },
  category: {
    type: CategoryType,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      return await Category.findOne({_id: args._id})
    },
  },
  categories: {
    type: new GraphQLList(CategoryType),
    args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      const query = {};
      query.parent_id = parent &amp;&amp; parent._id ? parent._id : null;;
      return await Category.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
    },
  },
  element: {
    type: ElementType,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      return await Element.findOne({_id: args._id})
    },
  },
  elements: {
    type: new GraphQLList(ElementType),
    args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      const query = {};
      return await Element.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
    },
  },
  element_kind: {
    type: ElementKindType,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      return await ElementKind.findOne({_id: args._id})
    },
  },
  element_kinds: {
    type: new GraphQLList(ElementKindType),
    args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      const query = {};
      return await ElementKind.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
    },
  },
  element_preference: {
    type: ElementPreferenceType,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      return await ElementPreference.findOne({_id: args._id})
    },
  },
  element_preferences: {
    type: new GraphQLList(ElementPreferenceType),
    args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      const query = {};
      query.student_id = context.user ? context.user.person_id : null;
      return await ElementPreference.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
    },
  },
  achievement: {
    type: AchievementType,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      return await Achievement.findOne({_id: args._id})
    },
  },
  achievements: {
    type: new GraphQLList(AchievementType),
    args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      const query = {};
      return await Achievement.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
    },
  },
  student_achievement: {
    type: StudentAchievementType,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      return await StudentAchievement.findOne({_id: args._id})
    },
  },
  student_achievements: {
    type: new GraphQLList(StudentAchievementType),
    args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      const query = {};
      return await StudentAchievement.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
    },
  },
  review: {
    type: ReviewType,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      return await Review.findOne({_id: args._id})
    },
  },
  reviews: {
    type: new GraphQLList(ReviewType),
    args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      const query = {};
      return await Review.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
    },
  },
  review_comment: {
    type: ReviewCommentType,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      return await ReviewComment.findOne({_id: args._id})
    },
  },
  review_comments: {
    type: new GraphQLList(ReviewCommentType),
    args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      const query = {};
      return await ReviewComment.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
    },
  },
  review_house_element: {
    type: ReviewHouseElementType,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      return await ReviewHouseElement.findOne({_id: args._id})
    },
  },
  review_house_elements: {
    type: new GraphQLList(ReviewHouseElementType),
    args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      const query = {};
      return await ReviewHouseElement.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
    },
  },
  house_element: {
    type: HouseElementType,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      return await HouseElement.findOne({_id: args._id})
    },
  },
  house_elements: {
    type: new GraphQLList(HouseElementType),
    args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      const query = {};
      return await HouseElement.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
    },
  },
  notification: {
    type: NotificationType,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      return await Notification.findOne({_id: args._id})
    },
  },
  notifications: {
    type: new GraphQLList(NotificationType),
    args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      const query = {};
      return await Notification.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
    },
  },
  bill: {
    type: BillType,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      return await Bill.findOne({_id: args._id})
    },
  },
  bills: {
    type: new GraphQLList(BillType),
    args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      const query = {};
      return await Bill.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
    },
  },
  house_bill: {
    type: HouseBillType,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      return await HouseBill.findOne({_id: args._id})
    },
  },
  house_bills: {
    type: new GraphQLList(HouseBillType),
    args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      const query = {};
      return await HouseBill.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
    },
  },
  favorite_house: {
    type: FavoriteHouseType,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      return await FavoriteHouse.findOne({_id: args._id})
    },
  },
  favorite_houses: {
    type: new GraphQLList(FavoriteHouseType),
    args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      const query = {};
      return await FavoriteHouse.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
    },
  },
  person_issue: {
    type: PersonIssueType,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      return await PersonIssue.findOne({_id: args._id})
    },
  },
  person_issues: {
    type: new GraphQLList(PersonIssueType),
    args: { skip: { type: GraphQLInt }, limit: { type: GraphQLInt }, },
    async resolve(parent, args, context) {
      const query = {};
      return await PersonIssue.find(query).skip(args.skip || 0).limit(args.limit || maxReturnedRows);
    },
  },
};

const mutationFields = {
  addUniversity: {
    type: UniversityType,
    args: { input: {type: UniversityCreateInput } },
    async resolve(parent, args) {
      return await University.create(args.input);
    }
  },
  updateUniversity: {
    type: UniversityType,
    args: { _id: { type: GraphQLNonNull(GraphQLInt) }, 
    input: { type: GraphQLNonNull(UniversityUpdateInput) },  },
    async resolve(parent, args) {
      return await University.findOneAndUpdate({ _id: args._id }, args.input, { new: true });
    }
  },
  deleteUniversity: {
    type: GraphQLBoolean,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args) {
      const result = await University.deleteOne({ _id: args._id });
      return result ? !!result.deletedCount : null
    }
  },
  addPerson: {
    type: PersonType,
    args: { input: {type: PersonCreateInput } },
    async resolve(parent, args) {
      for (const field of ["profile_photo_url"]) {
        if (!args.input[field]) {
          continue;
        }
        const inputFile = args.input[field];
        const { filename, mimetype, createReadStream } = await inputFile;
        console.log({ filename });
        console.log({ mimetype });
        const source = createReadStream();
        const uuid = uuidv4();
        const storeFileName = uuid + '-' + filename;
        const destFilePath = path.join(process.env.UPLOAD_PATH, storeFileName);
        console.log({ destFilePath });
        const dest = fs.createWriteStream(destFilePath);
      
        await new Promise((resolve, reject) => {
          source.on('open', () => {
            console.log('on open');
            source.pipe(dest);
          });
          source.on('error', (err) => {
            reject(err);
          });
          dest.on('error', (err) => {
            reject(err);
          });
          dest.on('finish', () => {
            console.log('on finish');
            resolve();
          });
        });
        args.input[field] = process.env.UPLOAD_URL + storeFileName;
      }
      return await Person.create(args.input);
    }
  },
  updatePerson: {
    type: PersonType,
    args: { _id: { type: GraphQLNonNull(GraphQLInt) }, 
    input: { type: GraphQLNonNull(PersonUpdateInput) },  },
    async resolve(parent, args) {
      for (const field of ["profile_photo_url"]) {
        if (!args.input[field]) {
          continue;
        }
        const inputFile = args.input[field];
        const { filename, mimetype, createReadStream } = await inputFile;
        console.log({ filename });
        console.log({ mimetype });
        const source = createReadStream();
        const uuid = uuidv4();
        const storeFileName = uuid + '-' + filename;
        const destFilePath = path.join(process.env.UPLOAD_PATH, storeFileName);
        console.log({ destFilePath });
        const dest = fs.createWriteStream(destFilePath);
      
        await new Promise((resolve, reject) => {
          source.on('open', () => {
            console.log('on open');
            source.pipe(dest);
          });
          source.on('error', (err) => {
            reject(err);
          });
          dest.on('error', (err) => {
            reject(err);
          });
          dest.on('finish', () => {
            console.log('on finish');
            resolve();
          });
        });
        args.input[field] = process.env.UPLOAD_URL + storeFileName;
      }
      return await Person.findOneAndUpdate({ _id: args._id }, args.input, { new: true });
    }
  },
  deletePerson: {
    type: GraphQLBoolean,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args) {
      for (const field of ["profile_photo_url"]) {
        const person = await Person.findOne({ _id: args._id });
        if (person) {
          const fileName = getUrlFileName(person[field]);
          const filePath = path.join(process.env.UPLOAD_PATH, fileName);
          fs.unlink(filePath, err => {console.log(err)});
        }
      }
      const result = await Person.deleteOne({ _id: args._id });
      return result ? !!result.deletedCount : null
    }
  },
  addTicket: {
    type: TicketType,
    args: { input: {type: TicketCreateInput } },
    async resolve(parent, args) {
      return await Ticket.create(args.input);
    }
  },
  updateTicket: {
    type: TicketType,
    args: { _id: { type: GraphQLNonNull(GraphQLInt) }, 
    input: { type: GraphQLNonNull(TicketUpdateInput) },  },
    async resolve(parent, args) {
      return await Ticket.findOneAndUpdate({ _id: args._id }, args.input, { new: true });
    }
  },
  deleteTicket: {
    type: GraphQLBoolean,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args) {
      const result = await Ticket.deleteOne({ _id: args._id });
      return result ? !!result.deletedCount : null
    }
  },
  addRole: {
    type: RoleType,
    args: { input: {type: RoleCreateInput } },
    async resolve(parent, args) {
      return await Role.create(args.input);
    }
  },
  updateRole: {
    type: RoleType,
    args: { _id: { type: GraphQLNonNull(GraphQLInt) }, 
    input: { type: GraphQLNonNull(RoleUpdateInput) },  },
    async resolve(parent, args) {
      return await Role.findOneAndUpdate({ _id: args._id }, args.input, { new: true });
    }
  },
  deleteRole: {
    type: GraphQLBoolean,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args) {
      const result = await Role.deleteOne({ _id: args._id });
      return result ? !!result.deletedCount : null
    }
  },
  addStudent: {
    type: StudentType,
    args: { input: {type: StudentCreateInput } },
    async resolve(parent, args) {
      return await Student.create(args.input);
    }
  },
  updateStudent: {
    type: StudentType,
    args: { _id: { type: GraphQLNonNull(GraphQLInt) }, 
    input: { type: GraphQLNonNull(StudentUpdateInput) },  },
    async resolve(parent, args) {
      if (args.input.person) {
        await Person.findOneAndUpdate({ _id: args._id }, args.input.person, { new: true });
      }
      return await Student.findOneAndUpdate({ _id: args._id }, args.input, { new: true });
    }
  },
  deleteStudent: {
    type: GraphQLBoolean,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args) {
      const result = await Student.deleteOne({ _id: args._id });
      await Person.deleteOne({ _id: args._id });
      return result ? !!result.deletedCount : null
    }
  },
  addStatus: {
    type: StatusType,
    args: { input: {type: StatusCreateInput } },
    async resolve(parent, args) {
      return await Status.create(args.input);
    }
  },
  updateStatus: {
    type: StatusType,
    args: { _id: { type: GraphQLNonNull(GraphQLInt) }, 
    input: { type: GraphQLNonNull(StatusUpdateInput) },  },
    async resolve(parent, args) {
      return await Status.findOneAndUpdate({ _id: args._id }, args.input, { new: true });
    }
  },
  deleteStatus: {
    type: GraphQLBoolean,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args) {
      const result = await Status.deleteOne({ _id: args._id });
      return result ? !!result.deletedCount : null
    }
  },
  addLandlord: {
    type: LandlordType,
    args: { input: {type: LandlordCreateInput } },
    async resolve(parent, args) {
      return await Landlord.create(args.input);
    }
  },
  updateLandlord: {
    type: LandlordType,
    args: { _id: { type: GraphQLNonNull(GraphQLInt) }, 
    input: { type: GraphQLNonNull(LandlordUpdateInput) },  },
    async resolve(parent, args) {
      if (args.input.person) {
        await Person.findOneAndUpdate({ _id: args._id }, args.input.person, { new: true });
      }
      return await Landlord.findOneAndUpdate({ _id: args._id }, args.input, { new: true });
    }
  },
  deleteLandlord: {
    type: GraphQLBoolean,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args) {
      const result = await Landlord.deleteOne({ _id: args._id });
      await Person.deleteOne({ _id: args._id });
      return result ? !!result.deletedCount : null
    }
  },
  addLandlordKind: {
    type: LandlordKindType,
    args: { input: {type: LandlordKindCreateInput } },
    async resolve(parent, args) {
      return await LandlordKind.create(args.input);
    }
  },
  updateLandlordKind: {
    type: LandlordKindType,
    args: { _id: { type: GraphQLNonNull(GraphQLInt) }, 
    input: { type: GraphQLNonNull(LandlordKindUpdateInput) },  },
    async resolve(parent, args) {
      return await LandlordKind.findOneAndUpdate({ _id: args._id }, args.input, { new: true });
    }
  },
  deleteLandlordKind: {
    type: GraphQLBoolean,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args) {
      const result = await LandlordKind.deleteOne({ _id: args._id });
      return result ? !!result.deletedCount : null
    }
  },
  addHouse: {
    type: HouseType,
    args: { input: {type: HouseCreateInput } },
    async resolve(parent, args) {
      return await House.create(args.input);
    }
  },
  updateHouse: {
    type: HouseType,
    args: { _id: { type: GraphQLNonNull(GraphQLInt) }, 
    input: { type: GraphQLNonNull(HouseUpdateInput) },  },
    async resolve(parent, args) {
      return await House.findOneAndUpdate({ _id: args._id }, args.input, { new: true });
    }
  },
  deleteHouse: {
    type: GraphQLBoolean,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args) {
      const result = await House.deleteOne({ _id: args._id });
      return result ? !!result.deletedCount : null
    }
  },
  addHouseKind: {
    type: HouseKindType,
    args: { input: {type: HouseKindCreateInput } },
    async resolve(parent, args) {
      return await HouseKind.create(args.input);
    }
  },
  updateHouseKind: {
    type: HouseKindType,
    args: { _id: { type: GraphQLNonNull(GraphQLInt) }, 
    input: { type: GraphQLNonNull(HouseKindUpdateInput) },  },
    async resolve(parent, args) {
      return await HouseKind.findOneAndUpdate({ _id: args._id }, args.input, { new: true });
    }
  },
  deleteHouseKind: {
    type: GraphQLBoolean,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args) {
      const result = await HouseKind.deleteOne({ _id: args._id });
      return result ? !!result.deletedCount : null
    }
  },
  addHousePhoto: {
    type: HousePhotoType,
    args: { input: {type: HousePhotoCreateInput } },
    async resolve(parent, args) {
      for (const field of ["url"]) {
        if (!args.input[field]) {
          continue;
        }
        const inputFile = args.input[field];
        const { filename, mimetype, createReadStream } = await inputFile;
        console.log({ filename });
        console.log({ mimetype });
        const source = createReadStream();
        const uuid = uuidv4();
        const storeFileName = uuid + '-' + filename;
        const destFilePath = path.join(process.env.UPLOAD_PATH, storeFileName);
        console.log({ destFilePath });
        const dest = fs.createWriteStream(destFilePath);
      
        await new Promise((resolve, reject) => {
          source.on('open', () => {
            console.log('on open');
            source.pipe(dest);
          });
          source.on('error', (err) => {
            reject(err);
          });
          dest.on('error', (err) => {
            reject(err);
          });
          dest.on('finish', () => {
            console.log('on finish');
            resolve();
          });
        });
        args.input[field] = process.env.UPLOAD_URL + storeFileName;
      }
      return await HousePhoto.create(args.input);
    }
  },
  updateHousePhoto: {
    type: HousePhotoType,
    args: { _id: { type: GraphQLNonNull(GraphQLInt) }, 
    input: { type: GraphQLNonNull(HousePhotoUpdateInput) },  },
    async resolve(parent, args) {
      for (const field of ["url"]) {
        if (!args.input[field]) {
          continue;
        }
        const inputFile = args.input[field];
        const { filename, mimetype, createReadStream } = await inputFile;
        console.log({ filename });
        console.log({ mimetype });
        const source = createReadStream();
        const uuid = uuidv4();
        const storeFileName = uuid + '-' + filename;
        const destFilePath = path.join(process.env.UPLOAD_PATH, storeFileName);
        console.log({ destFilePath });
        const dest = fs.createWriteStream(destFilePath);
      
        await new Promise((resolve, reject) => {
          source.on('open', () => {
            console.log('on open');
            source.pipe(dest);
          });
          source.on('error', (err) => {
            reject(err);
          });
          dest.on('error', (err) => {
            reject(err);
          });
          dest.on('finish', () => {
            console.log('on finish');
            resolve();
          });
        });
        args.input[field] = process.env.UPLOAD_URL + storeFileName;
      }
      return await HousePhoto.findOneAndUpdate({ _id: args._id }, args.input, { new: true });
    }
  },
  deleteHousePhoto: {
    type: GraphQLBoolean,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args) {
      for (const field of ["url"]) {
        const housePhoto = await HousePhoto.findOne({ _id: args._id });
        if (housePhoto) {
          const fileName = getUrlFileName(housePhoto[field]);
          const filePath = path.join(process.env.UPLOAD_PATH, fileName);
          fs.unlink(filePath, err => {console.log(err)});
        }
      }
      const result = await HousePhoto.deleteOne({ _id: args._id });
      return result ? !!result.deletedCount : null
    }
  },
  addBedroomPhoto: {
    type: BedroomPhotoType,
    args: { input: {type: BedroomPhotoCreateInput } },
    async resolve(parent, args) {
      for (const field of ["url"]) {
        if (!args.input[field]) {
          continue;
        }
        const inputFile = args.input[field];
        const { filename, mimetype, createReadStream } = await inputFile;
        console.log({ filename });
        console.log({ mimetype });
        const source = createReadStream();
        const uuid = uuidv4();
        const storeFileName = uuid + '-' + filename;
        const destFilePath = path.join(process.env.UPLOAD_PATH, storeFileName);
        console.log({ destFilePath });
        const dest = fs.createWriteStream(destFilePath);
      
        await new Promise((resolve, reject) => {
          source.on('open', () => {
            console.log('on open');
            source.pipe(dest);
          });
          source.on('error', (err) => {
            reject(err);
          });
          dest.on('error', (err) => {
            reject(err);
          });
          dest.on('finish', () => {
            console.log('on finish');
            resolve();
          });
        });
        args.input[field] = process.env.UPLOAD_URL + storeFileName;
      }
      return await BedroomPhoto.create(args.input);
    }
  },
  updateBedroomPhoto: {
    type: BedroomPhotoType,
    args: { _id: { type: GraphQLNonNull(GraphQLInt) }, 
    input: { type: GraphQLNonNull(BedroomPhotoUpdateInput) },  },
    async resolve(parent, args) {
      for (const field of ["url"]) {
        if (!args.input[field]) {
          continue;
        }
        const inputFile = args.input[field];
        const { filename, mimetype, createReadStream } = await inputFile;
        console.log({ filename });
        console.log({ mimetype });
        const source = createReadStream();
        const uuid = uuidv4();
        const storeFileName = uuid + '-' + filename;
        const destFilePath = path.join(process.env.UPLOAD_PATH, storeFileName);
        console.log({ destFilePath });
        const dest = fs.createWriteStream(destFilePath);
      
        await new Promise((resolve, reject) => {
          source.on('open', () => {
            console.log('on open');
            source.pipe(dest);
          });
          source.on('error', (err) => {
            reject(err);
          });
          dest.on('error', (err) => {
            reject(err);
          });
          dest.on('finish', () => {
            console.log('on finish');
            resolve();
          });
        });
        args.input[field] = process.env.UPLOAD_URL + storeFileName;
      }
      return await BedroomPhoto.findOneAndUpdate({ _id: args._id }, args.input, { new: true });
    }
  },
  deleteBedroomPhoto: {
    type: GraphQLBoolean,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args) {
      for (const field of ["url"]) {
        const bedroomPhoto = await BedroomPhoto.findOne({ _id: args._id });
        if (bedroomPhoto) {
          const fileName = getUrlFileName(bedroomPhoto[field]);
          const filePath = path.join(process.env.UPLOAD_PATH, fileName);
          fs.unlink(filePath, err => {console.log(err)});
        }
      }
      const result = await BedroomPhoto.deleteOne({ _id: args._id });
      return result ? !!result.deletedCount : null
    }
  },
  addFactGroup: {
    type: FactGroupType,
    args: { input: {type: FactGroupCreateInput } },
    async resolve(parent, args) {
      return await FactGroup.create(args.input);
    }
  },
  updateFactGroup: {
    type: FactGroupType,
    args: { _id: { type: GraphQLNonNull(GraphQLInt) }, 
    input: { type: GraphQLNonNull(FactGroupUpdateInput) },  },
    async resolve(parent, args) {
      return await FactGroup.findOneAndUpdate({ _id: args._id }, args.input, { new: true });
    }
  },
  deleteFactGroup: {
    type: GraphQLBoolean,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args) {
      const result = await FactGroup.deleteOne({ _id: args._id });
      return result ? !!result.deletedCount : null
    }
  },
  addHouseFact: {
    type: HouseFactType,
    args: { input: {type: HouseFactCreateInput } },
    async resolve(parent, args) {
      return await HouseFact.create(args.input);
    }
  },
  updateHouseFact: {
    type: HouseFactType,
    args: { _id: { type: GraphQLNonNull(GraphQLInt) }, 
    input: { type: GraphQLNonNull(HouseFactUpdateInput) },  },
    async resolve(parent, args) {
      return await HouseFact.findOneAndUpdate({ _id: args._id }, args.input, { new: true });
    }
  },
  deleteHouseFact: {
    type: GraphQLBoolean,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args) {
      const result = await HouseFact.deleteOne({ _id: args._id });
      return result ? !!result.deletedCount : null
    }
  },
  addHouseUniversity: {
    type: HouseUniversityType,
    args: { input: {type: HouseUniversityCreateInput } },
    async resolve(parent, args) {
      return await HouseUniversity.create(args.input);
    }
  },
  updateHouseUniversity: {
    type: HouseUniversityType,
    args: { _id: { type: GraphQLNonNull(GraphQLInt) }, 
    input: { type: GraphQLNonNull(HouseUniversityUpdateInput) },  },
    async resolve(parent, args) {
      return await HouseUniversity.findOneAndUpdate({ _id: args._id }, args.input, { new: true });
    }
  },
  deleteHouseUniversity: {
    type: GraphQLBoolean,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args) {
      const result = await HouseUniversity.deleteOne({ _id: args._id });
      return result ? !!result.deletedCount : null
    }
  },
  addBedroom: {
    type: BedroomType,
    args: { input: {type: BedroomCreateInput } },
    async resolve(parent, args) {
      return await Bedroom.create(args.input);
    }
  },
  updateBedroom: {
    type: BedroomType,
    args: { _id: { type: GraphQLNonNull(GraphQLInt) }, 
    input: { type: GraphQLNonNull(BedroomUpdateInput) },  },
    async resolve(parent, args) {
      return await Bedroom.findOneAndUpdate({ _id: args._id }, args.input, { new: true });
    }
  },
  deleteBedroom: {
    type: GraphQLBoolean,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args) {
      const result = await Bedroom.deleteOne({ _id: args._id });
      return result ? !!result.deletedCount : null
    }
  },
  addCategory: {
    type: CategoryType,
    args: { input: {type: CategoryCreateInput } },
    async resolve(parent, args) {
      return await Category.create(args.input);
    }
  },
  updateCategory: {
    type: CategoryType,
    args: { _id: { type: GraphQLNonNull(GraphQLInt) }, 
    input: { type: GraphQLNonNull(CategoryUpdateInput) },  },
    async resolve(parent, args) {
      return await Category.findOneAndUpdate({ _id: args._id }, args.input, { new: true });
    }
  },
  deleteCategory: {
    type: GraphQLBoolean,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args) {
      const result = await Category.deleteOne({ _id: args._id });
      return result ? !!result.deletedCount : null
    }
  },
  addElement: {
    type: ElementType,
    args: { input: {type: ElementCreateInput } },
    async resolve(parent, args) {
      return await Element.create(args.input);
    }
  },
  updateElement: {
    type: ElementType,
    args: { _id: { type: GraphQLNonNull(GraphQLInt) }, 
    input: { type: GraphQLNonNull(ElementUpdateInput) },  },
    async resolve(parent, args) {
      return await Element.findOneAndUpdate({ _id: args._id }, args.input, { new: true });
    }
  },
  deleteElement: {
    type: GraphQLBoolean,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args) {
      const result = await Element.deleteOne({ _id: args._id });
      return result ? !!result.deletedCount : null
    }
  },
  addElementKind: {
    type: ElementKindType,
    args: { input: {type: ElementKindCreateInput } },
    async resolve(parent, args) {
      return await ElementKind.create(args.input);
    }
  },
  updateElementKind: {
    type: ElementKindType,
    args: { _id: { type: GraphQLNonNull(GraphQLInt) }, 
    input: { type: GraphQLNonNull(ElementKindUpdateInput) },  },
    async resolve(parent, args) {
      return await ElementKind.findOneAndUpdate({ _id: args._id }, args.input, { new: true });
    }
  },
  deleteElementKind: {
    type: GraphQLBoolean,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args) {
      const result = await ElementKind.deleteOne({ _id: args._id });
      return result ? !!result.deletedCount : null
    }
  },
  addElementPreference: {
    type: ElementPreferenceType,
    args: { input: {type: ElementPreferenceCreateInput } },
    async resolve(parent, args) {
      return await ElementPreference.create(args.input);
    }
  },
  updateElementPreference: {
    type: ElementPreferenceType,
    args: { _id: { type: GraphQLNonNull(GraphQLInt) }, 
    input: { type: GraphQLNonNull(ElementPreferenceUpdateInput) },  },
    async resolve(parent, args) {
      return await ElementPreference.findOneAndUpdate({ _id: args._id }, args.input, { new: true });
    }
  },
  deleteElementPreference: {
    type: GraphQLBoolean,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args) {
      const result = await ElementPreference.deleteOne({ _id: args._id });
      return result ? !!result.deletedCount : null
    }
  },
  addAchievement: {
    type: AchievementType,
    args: { input: {type: AchievementCreateInput } },
    async resolve(parent, args) {
      return await Achievement.create(args.input);
    }
  },
  updateAchievement: {
    type: AchievementType,
    args: { _id: { type: GraphQLNonNull(GraphQLInt) }, 
    input: { type: GraphQLNonNull(AchievementUpdateInput) },  },
    async resolve(parent, args) {
      return await Achievement.findOneAndUpdate({ _id: args._id }, args.input, { new: true });
    }
  },
  deleteAchievement: {
    type: GraphQLBoolean,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args) {
      const result = await Achievement.deleteOne({ _id: args._id });
      return result ? !!result.deletedCount : null
    }
  },
  addStudentAchievement: {
    type: StudentAchievementType,
    args: { input: {type: StudentAchievementCreateInput } },
    async resolve(parent, args) {
      return await StudentAchievement.create(args.input);
    }
  },
  updateStudentAchievement: {
    type: StudentAchievementType,
    args: { _id: { type: GraphQLNonNull(GraphQLInt) }, 
    input: { type: GraphQLNonNull(StudentAchievementUpdateInput) },  },
    async resolve(parent, args) {
      return await StudentAchievement.findOneAndUpdate({ _id: args._id }, args.input, { new: true });
    }
  },
  deleteStudentAchievement: {
    type: GraphQLBoolean,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args) {
      const result = await StudentAchievement.deleteOne({ _id: args._id });
      return result ? !!result.deletedCount : null
    }
  },
  addReview: {
    type: ReviewType,
    args: { input: {type: ReviewCreateInput } },
    async resolve(parent, args) {
      return await Review.create(args.input);
    }
  },
  updateReview: {
    type: ReviewType,
    args: { _id: { type: GraphQLNonNull(GraphQLInt) }, 
    input: { type: GraphQLNonNull(ReviewUpdateInput) },  },
    async resolve(parent, args) {
      return await Review.findOneAndUpdate({ _id: args._id }, args.input, { new: true });
    }
  },
  deleteReview: {
    type: GraphQLBoolean,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args) {
      const result = await Review.deleteOne({ _id: args._id });
      return result ? !!result.deletedCount : null
    }
  },
  addReviewComment: {
    type: ReviewCommentType,
    args: { input: {type: ReviewCommentCreateInput } },
    async resolve(parent, args) {
      return await ReviewComment.create(args.input);
    }
  },
  updateReviewComment: {
    type: ReviewCommentType,
    args: { _id: { type: GraphQLNonNull(GraphQLInt) }, 
    input: { type: GraphQLNonNull(ReviewCommentUpdateInput) },  },
    async resolve(parent, args) {
      return await ReviewComment.findOneAndUpdate({ _id: args._id }, args.input, { new: true });
    }
  },
  deleteReviewComment: {
    type: GraphQLBoolean,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args) {
      const result = await ReviewComment.deleteOne({ _id: args._id });
      return result ? !!result.deletedCount : null
    }
  },
  addReviewHouseElement: {
    type: ReviewHouseElementType,
    args: { input: {type: ReviewHouseElementCreateInput } },
    async resolve(parent, args) {
      return await ReviewHouseElement.create(args.input);
    }
  },
  updateReviewHouseElement: {
    type: ReviewHouseElementType,
    args: { _id: { type: GraphQLNonNull(GraphQLInt) }, 
    input: { type: GraphQLNonNull(ReviewHouseElementUpdateInput) },  },
    async resolve(parent, args) {
      return await ReviewHouseElement.findOneAndUpdate({ _id: args._id }, args.input, { new: true });
    }
  },
  deleteReviewHouseElement: {
    type: GraphQLBoolean,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args) {
      const result = await ReviewHouseElement.deleteOne({ _id: args._id });
      return result ? !!result.deletedCount : null
    }
  },
  addHouseElement: {
    type: HouseElementType,
    args: { input: {type: HouseElementCreateInput } },
    async resolve(parent, args) {
      return await HouseElement.create(args.input);
    }
  },
  updateHouseElement: {
    type: HouseElementType,
    args: { _id: { type: GraphQLNonNull(GraphQLInt) }, 
    input: { type: GraphQLNonNull(HouseElementUpdateInput) },  },
    async resolve(parent, args) {
      return await HouseElement.findOneAndUpdate({ _id: args._id }, args.input, { new: true });
    }
  },
  deleteHouseElement: {
    type: GraphQLBoolean,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args) {
      const result = await HouseElement.deleteOne({ _id: args._id });
      return result ? !!result.deletedCount : null
    }
  },
  addNotification: {
    type: NotificationType,
    args: { input: {type: NotificationCreateInput } },
    async resolve(parent, args) {
      return await Notification.create(args.input);
    }
  },
  updateNotification: {
    type: NotificationType,
    args: { _id: { type: GraphQLNonNull(GraphQLInt) }, 
    input: { type: GraphQLNonNull(NotificationUpdateInput) },  },
    async resolve(parent, args) {
      return await Notification.findOneAndUpdate({ _id: args._id }, args.input, { new: true });
    }
  },
  deleteNotification: {
    type: GraphQLBoolean,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args) {
      const result = await Notification.deleteOne({ _id: args._id });
      return result ? !!result.deletedCount : null
    }
  },
  addBill: {
    type: BillType,
    args: { input: {type: BillCreateInput } },
    async resolve(parent, args) {
      return await Bill.create(args.input);
    }
  },
  updateBill: {
    type: BillType,
    args: { _id: { type: GraphQLNonNull(GraphQLInt) }, 
    input: { type: GraphQLNonNull(BillUpdateInput) },  },
    async resolve(parent, args) {
      return await Bill.findOneAndUpdate({ _id: args._id }, args.input, { new: true });
    }
  },
  deleteBill: {
    type: GraphQLBoolean,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args) {
      const result = await Bill.deleteOne({ _id: args._id });
      return result ? !!result.deletedCount : null
    }
  },
  addHouseBill: {
    type: HouseBillType,
    args: { input: {type: HouseBillCreateInput } },
    async resolve(parent, args) {
      return await HouseBill.create(args.input);
    }
  },
  updateHouseBill: {
    type: HouseBillType,
    args: { _id: { type: GraphQLNonNull(GraphQLInt) }, 
    input: { type: GraphQLNonNull(HouseBillUpdateInput) },  },
    async resolve(parent, args) {
      return await HouseBill.findOneAndUpdate({ _id: args._id }, args.input, { new: true });
    }
  },
  deleteHouseBill: {
    type: GraphQLBoolean,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args) {
      const result = await HouseBill.deleteOne({ _id: args._id });
      return result ? !!result.deletedCount : null
    }
  },
  addFavoriteHouse: {
    type: FavoriteHouseType,
    args: { input: {type: FavoriteHouseCreateInput } },
    async resolve(parent, args) {
      return await FavoriteHouse.create(args.input);
    }
  },
  updateFavoriteHouse: {
    type: FavoriteHouseType,
    args: { _id: { type: GraphQLNonNull(GraphQLInt) }, 
    input: { type: GraphQLNonNull(FavoriteHouseUpdateInput) },  },
    async resolve(parent, args) {
      return await FavoriteHouse.findOneAndUpdate({ _id: args._id }, args.input, { new: true });
    }
  },
  deleteFavoriteHouse: {
    type: GraphQLBoolean,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args) {
      const result = await FavoriteHouse.deleteOne({ _id: args._id });
      return result ? !!result.deletedCount : null
    }
  },
  addPersonIssue: {
    type: PersonIssueType,
    args: { input: {type: PersonIssueCreateInput } },
    async resolve(parent, args) {
      return await PersonIssue.create(args.input);
    }
  },
  updatePersonIssue: {
    type: PersonIssueType,
    args: { _id: { type: GraphQLNonNull(GraphQLInt) }, 
    input: { type: GraphQLNonNull(PersonIssueUpdateInput) },  },
    async resolve(parent, args) {
      return await PersonIssue.findOneAndUpdate({ _id: args._id }, args.input, { new: true });
    }
  },
  deletePersonIssue: {
    type: GraphQLBoolean,
    args: { _id: { type: GraphQLInt }, },
    async resolve(parent, args) {
      const result = await PersonIssue.deleteOne({ _id: args._id });
      return result ? !!result.deletedCount : null
    }
  },
};

const uniRoomyGraphQLTypes = {
UniversityType,
  PersonType,
  TicketType,
  RoleType,
  StudentType,
  StatusType,
  LandlordType,
  LandlordKindType,
  HouseType,
  HouseKindType,
  HousePhotoType,
  BedroomPhotoType,
  FactGroupType,
  HouseFactType,
  HouseUniversityType,
  BedroomType,
  CategoryType,
  ElementType,
  ElementKindType,
  ElementPreferenceType,
  AchievementType,
  StudentAchievementType,
  ReviewType,
  ReviewCommentType,
  ReviewHouseElementType,
  HouseElementType,
  NotificationType,
  BillType,
  HouseBillType,
  FavoriteHouseType,
  PersonIssue
};

const RootQuery = new GraphQLObjectType({
  name: 'RootQueryType',
  fields: prepareQueryFields(uniRoomyGraphQLTypes, queryFields),
});

const Mutation = new GraphQLObjectType({
  name: 'Mutation',
  fields: prepareMutationFields(uniRoomyGraphQLTypes, mutationFields),
});

const schema = new GraphQLSchema({
  query: RootQuery,
  mutation: Mutation,
});

module.exports = { schema };
</code></pre>
        </article>
    </section>




                </div>
            </div>
        </div>
    </div>

<footer class="footer">
    <div class="content has-text-centered">
        <p>Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.3</a> on Sat Nov 23 2019 21:28:17 GMT+0300 (Москва, стандартное время)</p>
        <p class="sidebar-created-by">
            <a href="https://github.com/SoftwareBrothers/better-docs" target="_blank">BetterDocs theme</a> provided with <i class="fas fa-heart"></i> by 
            <a href="http://softwarebrothers.co" target="_blank">SoftwareBrothers - JavaScript Development Agency</a>
        </p>
    </div>
</footer>

<script src="scripts/app.min.js"></script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
